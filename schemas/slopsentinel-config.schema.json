{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "title": "SlopSentinel configuration (tool.slopsentinel)",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "threshold": {
      "type": "integer",
      "minimum": 0,
      "maximum": 100
    },
    "fail_on_slop": { "type": "boolean" },
    "fail-on-slop": { "type": "boolean" },
    "languages": {
      "type": "array",
      "items": { "type": "string" }
    },
    "plugins": {
      "type": "array",
      "items": { "type": "string" }
    },
    "baseline": { "type": "string" },
    "ignore": { "$ref": "#/definitions/ignore" },
    "cache": { "$ref": "#/definitions/cache" },
    "history": { "$ref": "#/definitions/history" },
    "scoring": { "$ref": "#/definitions/scoring" },
    "rules": { "$ref": "#/definitions/rules" },
    "overrides": {
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        "^.+$": { "$ref": "#/definitions/dirOverride" }
      }
    }
  },
  "definitions": {
    "severity": {
      "type": "string",
      "enum": ["info", "warn", "warning", "error"]
    },
    "ruleId": {
      "type": "string",
      "pattern": "^[A-Z][0-9]{2,}$"
    },
    "ignore": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "paths": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    },
    "cache": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": { "type": "boolean" },
        "path": { "type": "string" }
      }
    },
    "history": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": { "type": "boolean" },
        "path": { "type": "string" },
        "max_entries": { "type": "integer", "minimum": 1 },
        "max-entries": { "type": "integer", "minimum": 1 }
      }
    },
    "scoring": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "profile": {
          "type": "string",
          "enum": ["default", "strict", "lenient"]
        },
        "penalties": {
          "type": "object",
          "additionalProperties": false,
          "patternProperties": {
            "^(fingerprint|quality|hallucination|maintainability|security)$": {
              "type": "object",
              "additionalProperties": false,
              "patternProperties": {
                "^(info|warn|warning|error)$": { "type": "integer", "minimum": 0 }
              }
            }
          }
        }
      }
    },
    "ruleOverrideTable": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "severity": { "$ref": "#/definitions/severity" }
      }
    },
    "rules": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enable": {
          "oneOf": [
            { "type": "string" },
            { "type": "array", "items": { "type": "string" } }
          ]
        },
        "disable": {
          "type": "array",
          "items": { "type": "string" }
        },
        "severity_overrides": {
          "type": "object",
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Z][0-9]{2,}$": { "$ref": "#/definitions/severity" }
          }
        },
        "severity-overrides": {
          "type": "object",
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Z][0-9]{2,}$": { "$ref": "#/definitions/severity" }
          }
        }
      },
      "patternProperties": {
        "^[A-Z][0-9]{2,}$": { "$ref": "#/definitions/ruleOverrideTable" }
      }
    },
    "dirOverride": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "rules": { "$ref": "#/definitions/rules" }
      }
    }
  }
}

